<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Loans</title>
<!-------------------bootstrap------------------------------->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<!-----------DataTables CSS para Bootstrap------------------->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
<link rel="stylesheet" th:href="@{/css/index.css}" />
</head>
<body>
<div class="container">
<br>
<br>
<br>
<h1 class="text-center mb-4">ðŸŒŸ LOAN LIST ðŸŒŸ</h1>
<div class="mb-3">
    <a th:href="@{/books/list}" class="btn btn-dark btn-md">Books</a>
</div>

<div class="orbit"></div>
<table id="loansTable" class="table table-striped table-bordered">
    <thead class="table-dark">
    <tr>
        <th>ID</th>
        <th>Book Title</th>
        <th>User</th>
        <th>Loan Date</th>
        <th>Return Date</th>
        <th>Status</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="loan : ${loans}">
        <td th:text="${loan.id}"></td>
        <td th:text="${loan.book.title}"></td>
        <td th:text="${loan.user != null ? loan.user.name : 'N/A'}"></td>
        <td th:text="${loan.loanDate}"></td>
        <td th:text="${loan.returnDate} != null ? ${loan.returnDate} : 'Not returned'"></td>
        <td th:text="${loan.status}"></td>
    </tr>
    </tbody>
</table>
</div>

<!--------------------------jQuery-------------------------->
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

<!----------------------Bootstrap JS------------------------->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-------------------DataTables JS--------------------------->
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

<script>
    $(document).ready(function() {
        if ($('#loansTable tbody tr').length > 0) {
            $('#loansTable').DataTable({
                "language": {
                    "url": "//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"
                }
            });
        }
    });
</script>
</body>
</html>
